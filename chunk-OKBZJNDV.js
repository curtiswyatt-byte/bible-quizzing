import{a as M}from"./chunk-KODUIQMG.js";import{Ea as w,Fa as y,H as c,Ha as O,M as h,N as T,Na as P,R as x,W as p,X as e,Y as i,Z as k,aa as f,ba as m,ca as s,d as C,ha as a,ia as _,ja as v,y as g,z as u}from"./chunk-45QSGMLT.js";function D(r,n){if(r&1){let t=f();e(0,"div",14),m("click",function(){let l=g(t).$implicit,d=s(3);return u(d.openTournament(l))}),e(1,"div",15)(2,"span",16),a(3),i(),e(4,"button",17),m("click",function(l){let d=g(t).$implicit,b=s(3);return u(b.confirmDelete(d,l))}),a(5,"Delete"),i()(),e(6,"div",18)(7,"span",19),a(8),i(),e(9,"span",20),a(10),i(),e(11,"span",21),a(12),i()(),e(13,"div",22)(14,"span",23),a(15),i()()()}if(r&2){let t=n.$implicit,o=s(3);c(3),_(t.name),c(5),_(o.getTypeLabel(t.type)),c(2),v("",t.teamNames.length," teams"),c(2),_(o.getMatchProgress(t)),c(3),v("Updated ",o.formatDate(t.updatedAt))}}function E(r,n){if(r&1&&(e(0,"div",10)(1,"h2",11),a(2,"In Progress"),i(),e(3,"div",12),x(4,D,16,5,"div",13),i()()),r&2){let t=s(2);c(4),p("ngForOf",t.inProgressTournaments)}}function I(r,n){if(r&1){let t=f();e(0,"div",25),m("click",function(){let l=g(t).$implicit,d=s(3);return u(d.openTournament(l))}),e(1,"div",15)(2,"span",16),a(3),i(),e(4,"button",17),m("click",function(l){let d=g(t).$implicit,b=s(3);return u(b.confirmDelete(d,l))}),a(5,"Delete"),i()(),e(6,"div",18)(7,"span",19),a(8),i(),e(9,"span",20),a(10),i()(),e(11,"div",22)(12,"span",23),a(13),i()()()}if(r&2){let t=n.$implicit,o=s(3);c(3),_(t.name),c(5),_(o.getTypeLabel(t.type)),c(2),v("",t.teamNames.length," teams"),c(3),v("Created ",o.formatDate(t.createdAt))}}function L(r,n){if(r&1&&(e(0,"div",10)(1,"h2",11),a(2,"Setup"),i(),e(3,"div",12),x(4,I,14,4,"div",24),i()()),r&2){let t=s(2);c(4),p("ngForOf",t.setupTournaments)}}function V(r,n){if(r&1){let t=f();e(0,"div",27),m("click",function(){let l=g(t).$implicit,d=s(3);return u(d.openTournament(l))}),e(1,"div",15)(2,"span",16),a(3),i(),e(4,"button",17),m("click",function(l){let d=g(t).$implicit,b=s(3);return u(b.confirmDelete(d,l))}),a(5,"Delete"),i()(),e(6,"div",18)(7,"span",19),a(8),i(),e(9,"span",20),a(10),i()(),e(11,"div",22)(12,"span",23),a(13),i()()()}if(r&2){let t=n.$implicit,o=s(3);c(3),_(t.name),c(5),_(o.getTypeLabel(t.type)),c(2),v("",t.teamNames.length," teams"),c(3),v("Completed ",o.formatDate(t.updatedAt))}}function z(r,n){if(r&1&&(e(0,"div",10)(1,"h2",11),a(2,"Completed"),i(),e(3,"div",12),x(4,V,14,4,"div",26),i()()),r&2){let t=s(2);c(4),p("ngForOf",t.completedTournaments)}}function F(r,n){if(r&1){let t=f();e(0,"div",28)(1,"p"),a(2,"No tournaments yet."),i(),e(3,"button",29),m("click",function(){g(t);let l=s(2);return u(l.navigateToSetup())}),a(4,"Create Your First Tournament"),i()()}}function $(r,n){if(r&1&&(e(0,"div",7),x(1,E,5,1,"div",8)(2,L,5,1,"div",8)(3,z,5,1,"div",8)(4,F,5,0,"div",9),i()),r&2){let t=s();c(),p("ngIf",t.inProgressTournaments.length>0),c(),p("ngIf",t.setupTournaments.length>0),c(),p("ngIf",t.completedTournaments.length>0),c(),p("ngIf",t.tournaments.length===0)}}function N(r,n){r&1&&(e(0,"div",30),k(1,"div",31),e(2,"p"),a(3,"Loading..."),i()())}function j(r,n){if(r&1){let t=f();e(0,"div",32),m("click",function(){g(t);let l=s();return u(l.cancelDelete())}),e(1,"div",33),m("click",function(l){return g(t),u(l.stopPropagation())}),e(2,"h2"),a(3,"Delete Tournament?"),i(),e(4,"p"),a(5),i(),e(6,"div",34)(7,"button",35),m("click",function(){g(t);let l=s();return u(l.cancelDelete())}),a(8,"Cancel"),i(),e(9,"button",36),m("click",function(){g(t);let l=s();return u(l.deleteConfirmed())}),a(10,"Delete"),i()()()()}if(r&2){let t=s();c(5),v('Are you sure you want to delete "',t.tournamentToDelete==null?null:t.tournamentToDelete.name,'"? This action cannot be undone.')}}var S=class r{constructor(n,t){this.router=n;this.dbService=t}tournaments=[];loading=!0;showDeleteConfirm=!1;tournamentToDelete=null;ngOnInit(){return C(this,null,function*(){yield this.loadTournaments()})}loadTournaments(){return C(this,null,function*(){this.loading=!0;try{this.tournaments=yield this.dbService.getAllTournaments(),this.tournaments.sort((n,t)=>new Date(t.updatedAt).getTime()-new Date(n.updatedAt).getTime())}catch(n){console.error("Failed to load tournaments:",n),this.tournaments=[]}this.loading=!1})}get inProgressTournaments(){return this.tournaments.filter(n=>n.status==="in-progress")}get setupTournaments(){return this.tournaments.filter(n=>n.status==="setup")}get completedTournaments(){return this.tournaments.filter(n=>n.status==="completed")}getStatusLabel(n){switch(n){case"in-progress":return"In Progress";case"setup":return"Setup";case"completed":return"Completed"}}getTypeLabel(n){return n==="single-elimination"?"Single Elimination":"Double Elimination"}getMatchProgress(n){let t=0,o=0;for(let l of n.rounds)for(let d of l.matches)d.team1Slot.type!=="bye"&&d.team2Slot.type!=="bye"&&(t++,d.result&&o++);return`${o}/${t} matches`}formatDate(n){return new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}navigateToSetup(){this.router.navigate(["/tournament-setup"])}openTournament(n){this.router.navigate(["/tournament",n.tournamentID])}confirmDelete(n,t){t.stopPropagation(),this.tournamentToDelete=n,this.showDeleteConfirm=!0}cancelDelete(){this.tournamentToDelete=null,this.showDeleteConfirm=!1}deleteConfirmed(){return C(this,null,function*(){this.tournamentToDelete&&(yield this.dbService.deleteTournament(this.tournamentToDelete.tournamentID),yield this.loadTournaments()),this.cancelDelete()})}goBack(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||r)(h(P),h(M))};static \u0275cmp=T({type:r,selectors:[["app-tournament-list"]],decls:11,vars:3,consts:[[1,"tournament-list-container"],[1,"page-header"],[1,"back-button",3,"click"],[1,"new-button",3,"click"],["class","content",4,"ngIf"],["class","loading",4,"ngIf"],["class","dialog-overlay",3,"click",4,"ngIf"],[1,"content"],["class","tournament-section",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"tournament-section"],[1,"section-title"],[1,"tournament-grid"],["class","tournament-card in-progress",3,"click",4,"ngFor","ngForOf"],[1,"tournament-card","in-progress",3,"click"],[1,"card-header"],[1,"tournament-name"],[1,"delete-btn",3,"click"],[1,"card-body"],[1,"tournament-type"],[1,"tournament-teams"],[1,"tournament-progress"],[1,"card-footer"],[1,"tournament-date"],["class","tournament-card setup",3,"click",4,"ngFor","ngForOf"],[1,"tournament-card","setup",3,"click"],["class","tournament-card completed",3,"click",4,"ngFor","ngForOf"],[1,"tournament-card","completed",3,"click"],[1,"empty-state"],[1,"btn-primary",3,"click"],[1,"loading"],[1,"spinner"],[1,"dialog-overlay",3,"click"],[1,"dialog-content",3,"click"],[1,"dialog-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(t,o){t&1&&(e(0,"div",0)(1,"header",1)(2,"button",2),m("click",function(){return o.goBack()}),a(3,"Back"),i(),e(4,"h1"),a(5,"Tournaments"),i(),e(6,"button",3),m("click",function(){return o.navigateToSetup()}),a(7,"New Tournament"),i()(),x(8,$,5,4,"div",4)(9,N,4,0,"div",5),i(),x(10,j,11,1,"div",6)),t&2&&(c(8),p("ngIf",!o.loading),c(),p("ngIf",o.loading),c(),p("ngIf",o.showDeleteConfirm))},dependencies:[O,w,y],styles:[".tournament-list-container[_ngcontent-%COMP%]{height:100vh;background:linear-gradient(135deg,#1e40af,#3b82f6,#1e40af);padding:var(--spacing-lg);display:flex;flex-direction:column;overflow:hidden;box-sizing:border-box}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-shrink:0;margin-bottom:var(--spacing-lg);padding:var(--spacing-md);background:#fffffff2;border-radius:var(--radius-lg);box-shadow:var(--shadow-md)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.75rem;color:var(--xl-blue-dark);margin:0}.back-button[_ngcontent-%COMP%], .new-button[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);font-size:1rem;font-weight:600;border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-base)}.back-button[_ngcontent-%COMP%]{background:var(--xl-gray-light);border:2px solid var(--xl-gray);color:var(--xl-gray-dark)}.back-button[_ngcontent-%COMP%]:hover{background:var(--xl-gray);color:var(--xl-white)}.new-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--xl-gold) 0%,var(--xl-gold-dark) 100%);border:none;color:var(--xl-black);font-weight:700}.new-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--xl-gold-dark) 0%,var(--xl-gold) 100%);color:var(--xl-white);transform:translateY(-2px)}.content[_ngcontent-%COMP%]{flex:1;max-width:1200px;width:100%;margin:0 auto;overflow-y:auto;padding-bottom:var(--spacing-md)}.tournament-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.section-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.25rem;color:var(--xl-white);margin-bottom:var(--spacing-md);padding-bottom:var(--spacing-sm);border-bottom:2px solid var(--xl-gold)}.tournament-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:var(--spacing-lg)}.tournament-card[_ngcontent-%COMP%]{background:var(--xl-white);border-radius:var(--radius-lg);padding:var(--spacing-md);box-shadow:var(--shadow-md);cursor:pointer;transition:all var(--transition-base);border-left:4px solid var(--xl-gray)}.tournament-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg)}.tournament-card.in-progress[_ngcontent-%COMP%]{border-left-color:var(--xl-gold)}.tournament-card.setup[_ngcontent-%COMP%]{border-left-color:var(--xl-blue)}.tournament-card.completed[_ngcontent-%COMP%]{border-left-color:#28a745}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--spacing-sm)}.tournament-name[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.125rem;font-weight:700;color:var(--xl-blue-dark)}.delete-btn[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);font-size:.75rem;font-weight:600;background:transparent;border:1px solid #dc3545;color:#dc3545;border-radius:var(--radius-sm);cursor:pointer;transition:all var(--transition-base)}.delete-btn[_ngcontent-%COMP%]:hover{background:#dc3545;color:var(--xl-white)}.card-body[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--spacing-sm);margin-bottom:var(--spacing-sm)}.tournament-type[_ngcontent-%COMP%], .tournament-teams[_ngcontent-%COMP%], .tournament-progress[_ngcontent-%COMP%]{font-size:.875rem;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--radius-sm);background:var(--xl-blue-lighter);color:var(--xl-blue-dark)}.tournament-progress[_ngcontent-%COMP%]{background:var(--xl-gold-light);color:var(--xl-gold-dark)}.card-footer[_ngcontent-%COMP%]{padding-top:var(--spacing-sm);border-top:1px solid var(--xl-gray-light)}.tournament-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--xl-gray-dark)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl);background:#fffffff2;border-radius:var(--radius-lg)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--xl-gray-dark);margin-bottom:var(--spacing-lg)}.btn-primary[_ngcontent-%COMP%]{padding:var(--spacing-md) var(--spacing-xl);font-size:1rem;font-weight:700;background:linear-gradient(135deg,var(--xl-gold) 0%,var(--xl-gold-dark) 100%);border:none;color:var(--xl-black);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-base)}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-2xl);color:var(--xl-white);font-size:1.125rem;min-height:200px}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:var(--spacing-md)}.spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid rgba(255,255,255,.3);border-top-color:var(--xl-gold);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--spacing-md)}.dialog-content[_ngcontent-%COMP%]{background:var(--xl-white);border-radius:var(--radius-lg);padding:var(--spacing-lg);max-width:400px;width:100%;box-shadow:var(--shadow-xl)}.dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 var(--spacing-md) 0;font-family:var(--font-heading);font-size:1.25rem;color:var(--xl-blue-dark)}.dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 var(--spacing-lg) 0;color:var(--xl-gray-dark)}.dialog-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);justify-content:flex-end}.btn[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);font-size:.9rem;font-weight:600;border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-base)}.btn-secondary[_ngcontent-%COMP%]{background:var(--xl-gray-light);border:2px solid var(--xl-gray);color:var(--xl-gray-dark)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--xl-gray);color:var(--xl-white)}.btn-danger[_ngcontent-%COMP%]{background:#dc3545;border:none;color:var(--xl-white)}.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}@media (max-width: 768px){.tournament-list-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-md);text-align:center}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{order:-1}.tournament-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.dialog-actions[_ngcontent-%COMP%]{flex-direction:column}.dialog-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}"]})};export{S as TournamentListComponent};
