import{a as G}from"./chunk-KODUIQMG.js";import{b as O,c as T,f as W,h as D,p as F}from"./chunk-GJ3ACHC3.js";import{Ea as N,Ga as E,H as s,Ha as S,M as b,N as P,Na as k,R as v,W as C,X as a,Y as i,aa as M,ba as m,ca as _,d as c,ha as o,ia as u,na as p,oa as y,pa as d,ta as w,ua as x,y as h,z as f}from"./chunk-45QSGMLT.js";function A(g,r){if(g&1){let t=M();a(0,"div",22),m("click",function(){let l=h(t).$implicit,n=_();return f(n.onPlayerClick(l))}),a(1,"div",23)(2,"span",24),o(3),w(4,"number"),i(),a(5,"span",25),o(6),i(),a(7,"span",26),o(8),i(),a(9,"button",27),m("click",function(l){let n=h(t).$implicit;return _().onDeletePlayer(n.playerNumber),f(l.stopPropagation())}),o(10," Delete "),i()()()}if(g&2){let t=r.$implicit;s(3),u(x(4,3,t.playerNumber,"3.0")),s(3),u(t.name),s(2),u(t.team)}}var I=class g{constructor(r,t){this.dbService=r;this.router=t}players=[];filteredPlayers=[];selectedPlayer=null;isNewPlayer=!1;playerNumber=null;name="";nickname="";ageGroup="";team=" ";searchTerm="";ngOnInit(){return c(this,null,function*(){yield this.loadPlayers()})}loadPlayers(){return c(this,null,function*(){this.players=yield this.dbService.getAllPlayers(),this.players.sort((r,t)=>r.playerNumber-t.playerNumber),this.filteredPlayers=[...this.players]})}onPlayerNumberChange(){return c(this,null,function*(){if(this.playerNumber===null||this.playerNumber===0){if(this.players.length>0){let t=Math.max(...this.players.map(e=>e.playerNumber));this.playerNumber=t+1}else this.playerNumber=1;this.isNewPlayer=!0,this.clearForm();return}let r=yield this.dbService.getPlayer(this.playerNumber);r?(this.selectedPlayer=r,this.isNewPlayer=!1,this.name=r.name,this.nickname=r.nickname,this.ageGroup=r.ageGroup,this.team=r.team):(this.isNewPlayer=!0,this.clearForm())})}onNameFocus(){(this.playerNumber===null||this.playerNumber===0)&&this.onPlayerNumberChange()}clearForm(){this.name="",this.nickname="",this.ageGroup="",this.team=" ",this.selectedPlayer=null}onAccept(){return c(this,null,function*(){if(!this.playerNumber||this.playerNumber<=0){alert("Please enter a valid player number");return}if(!this.name.trim()){alert("Player name is required");return}let r={playerNumber:this.playerNumber,name:this.name.trim(),nickname:this.nickname.trim()||" ",ageGroup:this.ageGroup.trim()||" ",team:this.team.trim()||" "};try{yield this.dbService.addPlayer(r),yield this.loadPlayers(),this.onCancel(),alert("Player saved successfully!")}catch(t){console.error("Error saving player:",t),alert("Error saving player. Please try again.")}})}onCancel(){this.playerNumber=null,this.clearForm(),this.isNewPlayer=!1,this.selectedPlayer=null}onDeletePlayer(r){return c(this,null,function*(){if(confirm("Do you wish to delete this player from the system?"))try{yield this.dbService.deletePlayer(r);let t=yield this.dbService.getAllTeams();for(let e of t)(yield this.dbService.getTeamMembers(e)).includes(r)&&(yield this.dbService.removeTeamMember(e,r));yield this.loadPlayers(),this.onCancel()}catch(t){console.error("Error deleting player:",t),alert("Error deleting player. Please try again.")}})}onPlayerClick(r){this.playerNumber=r.playerNumber,this.onPlayerNumberChange()}onSearch(){if(!this.searchTerm.trim()){this.filteredPlayers=[...this.players];return}let r=this.searchTerm.toLowerCase();this.filteredPlayers=this.players.filter(t=>t.name.toLowerCase().includes(r)||t.nickname.toLowerCase().includes(r)||t.playerNumber.toString().includes(r))}onReturn(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||g)(b(G),b(k))};static \u0275cmp=P({type:g,selectors:[["app-player-entry"]],decls:37,vars:6,consts:[[1,"player-entry-container"],[1,"player-entry-header"],[1,"btn","btn-secondary",3,"click"],[1,"player-entry-content"],[1,"form-section"],[1,"form-group"],["for","playerNumber",1,"form-label"],["type","number","id","playerNumber","placeholder","Enter or leave blank for auto",1,"form-control",3,"ngModelChange","blur","ngModel"],["for","name",1,"form-label"],["type","text","id","name","placeholder","Enter player's full name",1,"form-control",3,"ngModelChange","focus","ngModel"],["for","nickname",1,"form-label"],["type","text","id","nickname","placeholder","Enter nickname",1,"form-control",3,"ngModelChange","ngModel"],["for","ageGroup",1,"form-label"],["type","text","id","ageGroup","placeholder","Enter age group",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn",3,"click"],[1,"list-section"],[1,"search-box"],["type","text","placeholder","Search players...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"list-header"],[1,"player-list"],["class","list-item",3,"click",4,"ngFor","ngForOf"],[1,"list-item",3,"click"],[1,"player-item"],[1,"player-number"],[1,"player-name"],[1,"player-team"],[1,"btn","btn-danger","btn-small",3,"click"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Quiz Master Player Entry"),i(),a(4,"button",2),m("click",function(){return e.onReturn()}),o(5,"Return"),i()(),a(6,"div",3)(7,"div",4)(8,"div",5)(9,"label",6),o(10,"Player Number:"),i(),a(11,"input",7),d("ngModelChange",function(n){return y(e.playerNumber,n)||(e.playerNumber=n),n}),m("blur",function(){return e.onPlayerNumberChange()}),i()(),a(12,"div",5)(13,"label",8),o(14,"Player's Name:"),i(),a(15,"input",9),d("ngModelChange",function(n){return y(e.name,n)||(e.name=n),n}),m("focus",function(){return e.onNameFocus()}),i()(),a(16,"div",5)(17,"label",10),o(18,"Nickname:"),i(),a(19,"input",11),d("ngModelChange",function(n){return y(e.nickname,n)||(e.nickname=n),n}),i()(),a(20,"div",5)(21,"label",12),o(22,"Age Group:"),i(),a(23,"input",13),d("ngModelChange",function(n){return y(e.ageGroup,n)||(e.ageGroup=n),n}),i()(),a(24,"div",14)(25,"button",15),m("click",function(){return e.onAccept()}),o(26,"Accept"),i(),a(27,"button",2),m("click",function(){return e.onCancel()}),o(28,"Cancel"),i()()(),a(29,"div",16)(30,"div",17)(31,"input",18),d("ngModelChange",function(n){return y(e.searchTerm,n)||(e.searchTerm=n),n}),m("input",function(){return e.onSearch()}),i()(),a(32,"div",19)(33,"h3"),o(34,"Roster of Players"),i()(),a(35,"div",20),v(36,A,11,6,"div",21),i()()()()),t&2&&(s(11),p("ngModel",e.playerNumber),s(4),p("ngModel",e.name),s(4),p("ngModel",e.nickname),s(4),p("ngModel",e.ageGroup),s(8),p("ngModel",e.searchTerm),s(5),C("ngForOf",e.filteredPlayers))},dependencies:[S,N,F,O,D,T,W,E],styles:[".player-entry-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,var(--xl-gray-light) 0%,var(--xl-white) 100%);padding:var(--spacing-xl)}.player-entry-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-xl);background:var(--xl-white);padding:var(--spacing-lg);border-radius:var(--radius-lg);box-shadow:var(--shadow-md)}.player-entry-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:2rem;color:var(--xl-blue-dark);font-weight:700}.player-entry-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl);max-width:1400px;margin:0 auto}.form-section[_ngcontent-%COMP%], .list-section[_ngcontent-%COMP%]{background:var(--xl-white);border-radius:var(--radius-lg);padding:var(--spacing-xl);box-shadow:var(--shadow-lg);border:1px solid var(--xl-gray)}.list-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.search-box[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.list-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);padding-bottom:var(--spacing-md);border-bottom:3px solid var(--xl-gold)}.list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--xl-blue-dark);font-weight:700;font-family:var(--font-heading)}.player-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;max-height:600px;border-radius:var(--radius-md);border:1px solid var(--xl-gray)}.player-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr 150px auto;gap:var(--spacing-md);align-items:center;padding:var(--spacing-md);border-bottom:1px solid var(--xl-gray);transition:all var(--transition-base)}.player-item[_ngcontent-%COMP%]:hover{background-color:var(--xl-blue-lighter);transform:translate(4px)}.player-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.player-number[_ngcontent-%COMP%]{font-weight:700;color:var(--xl-blue-dark);font-size:1.125rem}.player-name[_ngcontent-%COMP%]{font-weight:600;color:var(--xl-gray-dark)}.player-team[_ngcontent-%COMP%]{color:var(--xl-gray-medium);font-size:.875rem;font-style:italic}.btn-small[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.875rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);margin-top:var(--spacing-xl)}@media (max-width: 968px){.player-entry-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.player-item[_ngcontent-%COMP%]{grid-template-columns:60px 1fr auto;gap:var(--spacing-sm)}.player-team[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){.player-entry-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.player-entry-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--spacing-md)}.player-entry-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};export{I as PlayerEntryComponent};
