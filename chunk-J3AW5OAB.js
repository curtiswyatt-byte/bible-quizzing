import{a as L}from"./chunk-KODUIQMG.js";import{b as O,c as T,f as W,h as F,j as G,k as D,l as A,p as I}from"./chunk-GJ3ACHC3.js";import{Ea as x,Ga as S,H as s,Ha as E,M as b,N as C,Na as k,R as P,W as h,X as a,Y as i,aa as N,ba as m,ca as v,d as g,ha as l,ia as u,na as c,oa as d,pa as y,ta as M,ua as w,y as f,z as _}from"./chunk-45QSGMLT.js";function z(p,r){if(p&1&&(a(0,"option",26),l(1),i()),p&2){let t=r.$implicit;h("value",t),s(),u(t)}}function B(p,r){if(p&1){let t=N();a(0,"div",27),m("click",function(){let o=f(t).$implicit,n=v();return _(n.onPlayerClick(o))}),a(1,"div",28)(2,"span",29),l(3),M(4,"number"),i(),a(5,"span",30),l(6),i(),a(7,"span",31),l(8),i(),a(9,"button",32),m("click",function(o){let n=f(t).$implicit;return v().onDeletePlayer(n.playerNumber),_(o.stopPropagation())}),l(10," Delete "),i()()()}if(p&2){let t=r.$implicit;s(3),u(w(4,3,t.playerNumber,"3.0")),s(3),u(t.name),s(2),u(t.team)}}var V=class p{constructor(r,t){this.dbService=r;this.router=t}players=[];filteredPlayers=[];selectedPlayer=null;isNewPlayer=!1;playerNumber=null;firstName="";lastName="";nickname="";ageGroup="";team=" ";ageGroupOptions=["Middle School","High School","Adult"];searchTerm="";ngOnInit(){return g(this,null,function*(){yield this.loadPlayers()})}loadPlayers(){return g(this,null,function*(){this.players=yield this.dbService.getAllPlayers(),this.players.sort((r,t)=>r.playerNumber-t.playerNumber),this.filteredPlayers=[...this.players]})}onPlayerNumberChange(){return g(this,null,function*(){if(this.playerNumber===null||this.playerNumber===0){if(this.players.length>0){let t=Math.max(...this.players.map(e=>e.playerNumber));this.playerNumber=t+1}else this.playerNumber=1;this.isNewPlayer=!0,this.clearForm();return}let r=yield this.dbService.getPlayer(this.playerNumber);if(r){this.selectedPlayer=r,this.isNewPlayer=!1;let t=r.name.split(",").map(e=>e.trim());t.length>=2?(this.lastName=t[0],this.firstName=t[1]):(this.firstName=r.name,this.lastName=""),this.nickname=r.nickname,this.ageGroup=r.ageGroup,this.team=r.team}else this.isNewPlayer=!0,this.clearForm()})}onNameFocus(){(this.playerNumber===null||this.playerNumber===0)&&this.onPlayerNumberChange()}clearForm(){this.firstName="",this.lastName="",this.nickname="",this.ageGroup="",this.team=" ",this.selectedPlayer=null}onAccept(){return g(this,null,function*(){if(!this.playerNumber||this.playerNumber<=0){alert("Please enter a valid player number");return}if(!this.firstName.trim()&&!this.lastName.trim()){alert("Please enter at least first or last name");return}let r="";this.lastName.trim()&&this.firstName.trim()?r=`${this.lastName.trim()}, ${this.firstName.trim()}`:this.lastName.trim()?r=this.lastName.trim():r=this.firstName.trim();let t={playerNumber:this.playerNumber,name:r,nickname:this.nickname.trim()||" ",ageGroup:this.ageGroup.trim()||" ",team:this.team.trim()||" "};try{yield this.dbService.addPlayer(t),yield this.loadPlayers(),this.onCancel(),alert("Player saved successfully!")}catch(e){console.error("Error saving player:",e),alert("Error saving player. Please try again.")}})}onCancel(){this.playerNumber=null,this.clearForm(),this.isNewPlayer=!1,this.selectedPlayer=null}onDeletePlayer(r){return g(this,null,function*(){if(confirm("Do you wish to delete this player from the system?"))try{yield this.dbService.deletePlayer(r);let t=yield this.dbService.getAllTeams();for(let e of t)(yield this.dbService.getTeamMembers(e)).includes(r)&&(yield this.dbService.removeTeamMember(e,r));yield this.loadPlayers(),this.onCancel()}catch(t){console.error("Error deleting player:",t),alert("Error deleting player. Please try again.")}})}onPlayerClick(r){this.playerNumber=r.playerNumber,this.onPlayerNumberChange()}onSearch(){if(!this.searchTerm.trim()){this.filteredPlayers=[...this.players];return}let r=this.searchTerm.toLowerCase();this.filteredPlayers=this.players.filter(t=>t.name.toLowerCase().includes(r)||t.nickname.toLowerCase().includes(r)||t.playerNumber.toString().includes(r))}onReturn(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||p)(b(L),b(k))};static \u0275cmp=C({type:p,selectors:[["app-player-entry"]],decls:44,vars:8,consts:[[1,"player-entry-container"],[1,"player-entry-header"],[1,"btn","btn-secondary",3,"click"],[1,"player-entry-content"],[1,"form-section"],[1,"form-group"],["for","playerNumber",1,"form-label"],["type","number","id","playerNumber","placeholder","Enter or leave blank for auto",1,"form-control",3,"ngModelChange","blur","ngModel"],["for","firstName",1,"form-label"],["type","text","id","firstName","placeholder","Enter first name",1,"form-control",3,"ngModelChange","focus","ngModel"],["for","lastName",1,"form-label"],["type","text","id","lastName","placeholder","Enter last name",1,"form-control",3,"ngModelChange","ngModel"],["for","nickname",1,"form-label"],["type","text","id","nickname","placeholder","Enter nickname",1,"form-control",3,"ngModelChange","ngModel"],["for","ageGroup",1,"form-label"],["id","ageGroup",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-actions"],[1,"btn",3,"click"],[1,"list-section"],[1,"search-box"],["type","text","placeholder","Search players...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"list-header"],[1,"player-list"],["class","list-item",3,"click",4,"ngFor","ngForOf"],[3,"value"],[1,"list-item",3,"click"],[1,"player-item"],[1,"player-number"],[1,"player-name"],[1,"player-team"],[1,"btn","btn-danger","btn-small",3,"click"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Quiz Master Player Entry"),i(),a(4,"button",2),m("click",function(){return e.onReturn()}),l(5,"Return"),i()(),a(6,"div",3)(7,"div",4)(8,"div",5)(9,"label",6),l(10,"Player Number:"),i(),a(11,"input",7),y("ngModelChange",function(n){return d(e.playerNumber,n)||(e.playerNumber=n),n}),m("blur",function(){return e.onPlayerNumberChange()}),i()(),a(12,"div",5)(13,"label",8),l(14,"First Name:"),i(),a(15,"input",9),y("ngModelChange",function(n){return d(e.firstName,n)||(e.firstName=n),n}),m("focus",function(){return e.onNameFocus()}),i()(),a(16,"div",5)(17,"label",10),l(18,"Last Name:"),i(),a(19,"input",11),y("ngModelChange",function(n){return d(e.lastName,n)||(e.lastName=n),n}),i()(),a(20,"div",5)(21,"label",12),l(22,"Nickname:"),i(),a(23,"input",13),y("ngModelChange",function(n){return d(e.nickname,n)||(e.nickname=n),n}),i()(),a(24,"div",5)(25,"label",14),l(26,"Age Group:"),i(),a(27,"select",15),y("ngModelChange",function(n){return d(e.ageGroup,n)||(e.ageGroup=n),n}),a(28,"option",16),l(29,"-- Select Age Group --"),i(),P(30,z,2,2,"option",17),i()(),a(31,"div",18)(32,"button",19),m("click",function(){return e.onAccept()}),l(33,"Accept"),i(),a(34,"button",2),m("click",function(){return e.onCancel()}),l(35,"Clear"),i()()(),a(36,"div",20)(37,"div",21)(38,"input",22),y("ngModelChange",function(n){return d(e.searchTerm,n)||(e.searchTerm=n),n}),m("input",function(){return e.onSearch()}),i()(),a(39,"div",23)(40,"h3"),l(41,"Roster of Players"),i()(),a(42,"div",24),P(43,B,11,6,"div",25),i()()()()),t&2&&(s(11),c("ngModel",e.playerNumber),s(4),c("ngModel",e.firstName),s(4),c("ngModel",e.lastName),s(4),c("ngModel",e.nickname),s(4),c("ngModel",e.ageGroup),s(3),h("ngForOf",e.ageGroupOptions),s(8),c("ngModel",e.searchTerm),s(5),h("ngForOf",e.filteredPlayers))},dependencies:[E,x,I,D,A,O,F,G,T,W,S],styles:[".player-entry-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,var(--xl-gray-light) 0%,var(--xl-white) 100%);padding:var(--spacing-xl)}.player-entry-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-xl);background:var(--xl-white);padding:var(--spacing-lg);border-radius:var(--radius-lg);box-shadow:var(--shadow-md)}.player-entry-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:2rem;color:var(--xl-blue-dark);font-weight:700}.player-entry-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl);max-width:1400px;margin:0 auto}.form-section[_ngcontent-%COMP%], .list-section[_ngcontent-%COMP%]{background:var(--xl-white);border-radius:var(--radius-lg);padding:var(--spacing-xl);box-shadow:var(--shadow-lg);border:1px solid var(--xl-gray)}.list-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.search-box[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.list-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);padding-bottom:var(--spacing-md);border-bottom:3px solid var(--xl-gold)}.list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--xl-blue-dark);font-weight:700;font-family:var(--font-heading)}.player-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;max-height:600px;border-radius:var(--radius-md);border:1px solid var(--xl-gray)}.player-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:60px 1fr 120px 70px;gap:var(--spacing-md);align-items:center;padding:var(--spacing-md);border-bottom:1px solid var(--xl-gray);transition:all var(--transition-base)}.player-item[_ngcontent-%COMP%]:hover{background-color:var(--xl-blue-lighter);transform:translate(4px)}.player-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.player-number[_ngcontent-%COMP%]{font-weight:700;color:var(--xl-blue-dark);font-size:1.125rem}.player-name[_ngcontent-%COMP%]{font-weight:600;color:var(--xl-gray-dark);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.player-team[_ngcontent-%COMP%]{color:var(--xl-gray-medium);font-size:.875rem;font-style:italic;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-small[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.875rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);margin-top:var(--spacing-xl)}@media (max-width: 968px){.player-entry-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.player-item[_ngcontent-%COMP%]{grid-template-columns:60px 1fr auto;gap:var(--spacing-sm)}.player-team[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){.player-entry-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.player-entry-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--spacing-md)}.player-entry-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};export{V as PlayerEntryComponent};
