import{g as n,s as i}from"./chunk-45QSGMLT.js";var t={timeoutsPerTeam:2,answerTimeSeconds:30,speakWaitSeconds:3,timeoutDurationSeconds:60,appealsPerTeam:2,appealDurationSeconds:90,quizOutCorrect:4,quizOutBonusPoints:10,errorOutMisses:3,errorOutPenaltyPoints:-10,foulsToFoulOut:2,foulOutPenalty:-10,bonusQuestionPoints:10};var s=class r{storageKey="match-settings";settingsSubject;constructor(){let e=this.readFromStorage();this.settingsSubject=new n(e??t)}get settings$(){return this.settingsSubject.asObservable()}getSettings(){return this.settingsSubject.value}updateSettings(e){let o=this.normalize(e);this.settingsSubject.next(o),this.writeToStorage(o)}resetToDefaults(){this.settingsSubject.next(t),this.writeToStorage(t)}normalize(e){return{timeoutsPerTeam:this.coercePositiveInt(e.timeoutsPerTeam,t.timeoutsPerTeam),answerTimeSeconds:this.coercePositiveInt(e.answerTimeSeconds,t.answerTimeSeconds),speakWaitSeconds:this.coercePositiveInt(e.speakWaitSeconds,t.speakWaitSeconds),timeoutDurationSeconds:this.coercePositiveInt(e.timeoutDurationSeconds,t.timeoutDurationSeconds),appealsPerTeam:this.coercePositiveInt(e.appealsPerTeam,t.appealsPerTeam),appealDurationSeconds:this.coercePositiveInt(e.appealDurationSeconds,t.appealDurationSeconds),quizOutCorrect:this.coercePositiveInt(e.quizOutCorrect,t.quizOutCorrect),quizOutBonusPoints:this.coerceInt(e.quizOutBonusPoints,t.quizOutBonusPoints),errorOutMisses:this.coercePositiveInt(e.errorOutMisses,t.errorOutMisses),errorOutPenaltyPoints:this.coerceInt(e.errorOutPenaltyPoints,t.errorOutPenaltyPoints),foulsToFoulOut:this.coercePositiveInt(e.foulsToFoulOut,t.foulsToFoulOut),foulOutPenalty:this.coerceInt(e.foulOutPenalty,t.foulOutPenalty),bonusQuestionPoints:this.coerceInt(e.bonusQuestionPoints,t.bonusQuestionPoints)}}coercePositiveInt(e,o){return(Number.isFinite(e)?Math.max(0,Math.floor(e)):o)||o}coerceInt(e,o){return Number.isFinite(e)?Math.floor(e):o}readFromStorage(){if(typeof window>"u")return null;try{let e=window.localStorage.getItem(this.storageKey);return e?this.normalize(JSON.parse(e)):null}catch(e){return console.warn("Unable to parse stored match settings:",e),null}}writeToStorage(e){if(!(typeof window>"u"))try{window.localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(o){console.warn("Unable to persist match settings:",o)}}static \u0275fac=function(o){return new(o||r)};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};export{t as a,s as b};
