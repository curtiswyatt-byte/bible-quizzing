import{a as Q,b as U}from"./chunk-QU53OZXT.js";import"./chunk-7WO65EVB.js";import{a as q}from"./chunk-KODUIQMG.js";import{b as V,c as B,f as F,j as z,k as N,l as L,p as A}from"./chunk-GJ3ACHC3.js";import{Ea as O,Fa as D,H as s,Ha as E,M as f,N as y,Na as T,R as b,W as m,X as n,Y as t,Z as P,aa as v,ba as c,ca as d,d as _,ea as S,fa as M,ha as o,ia as C,ja as I,ka as w,na as x,oa as h,pa as k,y as g,z as u}from"./chunk-45QSGMLT.js";function $(l,a){if(l&1&&(n(0,"p",16),o(1),t()),l&2){let e=d();s(),C(e.bookName)}}function Y(l,a){if(l&1){let e=v();n(0,"button",17),c("click",function(){g(e);let i=d();return u(i.toggleDatasetSelector())}),o(1," Change Book/Version "),t()}}function j(l,a){if(l&1&&(n(0,"option",30),o(1),t()),l&2){let e=a.$implicit;m("value",e.id),s(),w(" ",e.book," - ",e.version," ")}}function R(l,a){if(l&1){let e=v();n(0,"div")(1,"select",24),k("ngModelChange",function(i){g(e);let p=d(2);return h(p.selectedDatasetId,i)||(p.selectedDatasetId=i),u(i)}),n(2,"option",25),o(3,"-- Select a dataset --"),t(),b(4,j,2,3,"option",26),t(),n(5,"div",27)(6,"button",28),c("click",function(){g(e);let i=d(2);return u(i.changeDataset())}),o(7," Load Dataset "),t(),n(8,"button",29),c("click",function(){g(e);let i=d(2);return u(i.cancelDatasetChange())}),o(9," Cancel "),t()()()}if(l&2){let e=d(2);s(),x("ngModel",e.selectedDatasetId),s(3),m("ngForOf",e.datasets),s(2),m("disabled",!e.selectedDatasetId)}}function J(l,a){if(l&1){let e=v();n(0,"div",31)(1,"div",32)(2,"label",33),o(3,"Book of the Bible"),t(),n(4,"input",34),k("ngModelChange",function(i){g(e);let p=d(2);return h(p.newBook,i)||(p.newBook=i),u(i)}),t()(),n(5,"div",32)(6,"label",35),o(7,"Bible Version"),t(),n(8,"input",36),k("ngModelChange",function(i){g(e);let p=d(2);return h(p.newVersion,i)||(p.newVersion=i),u(i)}),t()(),n(9,"div",27)(10,"button",28),c("click",function(){g(e);let i=d(2);return u(i.createNewBook())}),o(11," Create "),t(),n(12,"button",29),c("click",function(){g(e);let i=d(2);return u(i.cancelDatasetChange())}),o(13," Cancel "),t()()()}if(l&2){let e=d(2);s(4),x("ngModel",e.newBook),s(4),x("ngModel",e.newVersion),s(2),m("disabled",!e.newBook||!e.newVersion)}}function Z(l,a){if(l&1){let e=v();n(0,"div",18)(1,"h3"),o(2,"Select or Create Book & Version"),t(),n(3,"div",19)(4,"div",20)(5,"button",21),c("click",function(){g(e);let i=d();return u(i.selectorMode="existing")}),o(6," Select Existing "),t(),n(7,"button",21),c("click",function(){g(e);let i=d();return u(i.selectorMode="create")}),o(8," Create New "),t()(),b(9,R,10,3,"div",22)(10,J,14,3,"div",23),t()()}if(l&2){let e=d();s(5),M("active",e.selectorMode==="existing"),s(2),M("active",e.selectorMode==="create"),s(2),m("ngIf",e.selectorMode==="existing"),s(),m("ngIf",e.selectorMode==="create")}}function G(l,a){if(l&1&&(n(0,"div",37)(1,"h3"),o(2,"Bulk Import in Progress"),t(),n(3,"p"),o(4),t(),n(5,"div",38),P(6,"div",39),t(),n(7,"p"),o(8),t()()),l&2){let e=d();s(4),C(e.bulkImportProgress),s(2),S("width",e.bulkImportCurrent/e.bulkImportTotal*100,"%"),s(2),w("",e.bulkImportCurrent," / ",e.bulkImportTotal," datasets")}}var W=class l{constructor(a,e,r,i){this.router=a;this.dbService=e;this.dataLoader=r;this.catalogService=i}title="XL Ministries, Inc. Bible Quizzing";bookName="";userFile=null;showDatasetSelector=!1;datasets=[];selectedDatasetId="";selectorMode="existing";newBook="";newVersion="";isBulkImporting=!1;bulkImportProgress="";bulkImportCurrent=0;bulkImportTotal=0;ngOnInit(){return _(this,null,function*(){this.datasets=yield this.catalogService.getCatalog(),this.userFile=yield this.dbService.getUserFile(),this.userFile&&(this.userFile.bookVersion?this.bookName=`${this.userFile.book} (${this.userFile.bookVersion})`:this.bookName=this.userFile.book,this.selectedDatasetId=this.userFile.datasetId||"")})}navigateTo(a){this.router.navigate([a])}toggleDatasetSelector(){this.showDatasetSelector=!this.showDatasetSelector}changeDataset(){return _(this,null,function*(){if(!this.selectedDatasetId)return;let a=this.datasets.find(e=>e.id===this.selectedDatasetId);if(a)try{yield this.dataLoader.loadDataset(a,{persistSelection:!0,resetMatch:!0}),this.userFile=yield this.dbService.getUserFile(),this.userFile&&(this.userFile.bookVersion?this.bookName=`${this.userFile.book} (${this.userFile.bookVersion})`:this.bookName=this.userFile.book),this.showDatasetSelector=!1}catch(e){console.error("Error loading dataset:",e),alert("Error loading dataset. Please try again.")}})}cancelDatasetChange(){this.userFile&&(this.selectedDatasetId=this.userFile.datasetId||""),this.showDatasetSelector=!1,this.selectorMode="existing",this.newBook="",this.newVersion=""}createNewBook(){return _(this,null,function*(){if(!(!this.newBook.trim()||!this.newVersion.trim()))try{let a={book:this.newBook.trim(),bookVersion:this.newVersion.trim(),quizDBname:`${this.newBook.trim()} Dataset`,quizIDPre:"Quiz",quizIDNum:"1",backupDrive:"A",datasetId:`${this.newBook.trim().toLowerCase().replace(/\s+/g,"-")}-${this.newVersion.trim().toLowerCase().replace(/\s+/g,"-")}`};yield this.dbService.saveUserFile(a),this.userFile=a,this.bookName=`${a.book} (${a.bookVersion})`,this.showDatasetSelector=!1,this.selectorMode="existing",this.newBook="",this.newVersion="",alert(`Created new book/version: ${a.book} (${a.bookVersion}). You can now add questions for this book.`)}catch(a){console.error("Error creating new book/version:",a),alert("Error creating new book/version. Please try again.")}})}bulkImportAllDatasets(){return _(this,null,function*(){if(confirm(`This will load ALL ${this.datasets.length} datasets into the database.

This will:
\u2022 Import all questions from all books and versions
\u2022 Import all players from all datasets
\u2022 Import all teams from all datasets
\u2022 Merge everything into one unified database

This may take a few minutes. Continue?`)){this.isBulkImporting=!0,this.bulkImportProgress="Starting bulk import...",this.bulkImportCurrent=0,this.bulkImportTotal=this.datasets.length;try{yield this.dataLoader.loadAllDatasets((a,e,r)=>{this.bulkImportProgress=a,this.bulkImportCurrent=e,this.bulkImportTotal=r}),this.userFile=yield this.dbService.getUserFile(),this.userFile&&(this.userFile.bookVersion?this.bookName=`${this.userFile.book} (${this.userFile.bookVersion})`:this.bookName=this.userFile.book),this.isBulkImporting=!1,alert(`\u2728 Bulk import complete!

All datasets have been merged into the database.
Check the Database Explorer to see all the data.`)}catch(a){console.error("Bulk import failed:",a),this.isBulkImporting=!1,alert("Error during bulk import. Check console for details.")}}})}static \u0275fac=function(e){return new(e||l)(f(T),f(q),f(U),f(Q))};static \u0275cmp=y({type:l,selectors:[["app-main-menu"]],decls:66,vars:6,consts:[[1,"main-menu-container"],[1,"main-menu-header"],[1,"main-title"],[1,"book-selector-container"],["class","book-name",4,"ngIf"],["class","btn-change-book",3,"click",4,"ngIf"],["class","dataset-selector",4,"ngIf"],[1,"main-menu-content"],[1,"menu-nav"],[1,"menu-section"],[1,"menu-section-title"],[1,"menu-list"],[1,"menu-item",3,"click"],[1,"menu-item","primary",3,"click"],[1,"menu-item",3,"click","disabled"],["class","bulk-import-progress",4,"ngIf"],[1,"book-name"],[1,"btn-change-book",3,"click"],[1,"dataset-selector"],[1,"selector-content"],[1,"selector-mode-tabs"],[1,"mode-tab",3,"click"],[4,"ngIf"],["class","create-form",4,"ngIf"],[1,"dataset-dropdown",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"selector-buttons"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-secondary",3,"click"],[3,"value"],[1,"create-form"],[1,"form-group"],["for","newBook"],["id","newBook","type","text","placeholder","e.g., James, 1 Corinthians",1,"form-input",3,"ngModelChange","ngModel"],["for","newVersion"],["id","newVersion","type","text","placeholder","e.g., NIV 1984, ESV, KJV",1,"form-input",3,"ngModelChange","ngModel"],[1,"bulk-import-progress"],[1,"progress-bar"],[1,"progress-fill"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"BIBLE QUIZZING"),t(),n(4,"div",3),b(5,$,2,1,"p",4)(6,Y,2,0,"button",5),t(),b(7,Z,11,6,"div",6),t(),n(8,"div",7)(9,"nav",8)(10,"div",9)(11,"h2",10),o(12,"Create Quizzes"),t(),n(13,"ul",11)(14,"li")(15,"button",12),c("click",function(){return r.navigateTo("/question-entry")}),o(16,"Enter Questions"),t()(),n(17,"li")(18,"button",12),c("click",function(){return r.navigateTo("/quiz-sets")}),o(19,"Manage Quiz Sets"),t()(),n(20,"li")(21,"button",12),c("click",function(){return r.navigateTo("/question-version-analyzer")}),o(22,"Fix Question Book/Version"),t()()()(),n(23,"div",9)(24,"h2",10),o(25,"Team Set Up"),t(),n(26,"ul",11)(27,"li")(28,"button",12),c("click",function(){return r.navigateTo("/team-setup")}),o(29,"Team Entry"),t()(),n(30,"li")(31,"button",12),c("click",function(){return r.navigateTo("/player-entry")}),o(32,"Player Entry"),t()()()(),n(33,"div",9)(34,"h2",10),o(35,"Quiz Match"),t(),n(36,"ul",11)(37,"li")(38,"button",13),c("click",function(){return r.navigateTo("/match-setup")}),o(39,"Play"),t()(),n(40,"li")(41,"button",12),c("click",function(){return r.navigateTo("/tournaments")}),o(42,"Tournaments"),t()(),n(43,"li")(44,"button",12),c("click",function(){return r.navigateTo("/match-settings")}),o(45,"Match Settings"),t()(),n(46,"li")(47,"button",12),c("click",function(){return r.navigateTo("/statistics")}),o(48,"Statistics"),t()(),n(49,"li")(50,"button",12),c("click",function(){return r.navigateTo("/match-history")}),o(51,"Match History"),t()()()(),n(52,"div",9)(53,"h2",10),o(54,"Administration"),t(),n(55,"ul",11)(56,"li")(57,"button",12),c("click",function(){return r.navigateTo("/database-explorer")}),o(58,"Database Explorer"),t()(),n(59,"li")(60,"button",12),c("click",function(){return r.navigateTo("/print-questions")}),o(61,"Print Questions & Matches"),t()(),n(62,"li")(63,"button",14),c("click",function(){return r.bulkImportAllDatasets()}),o(64),t()()()(),b(65,G,9,5,"div",15),t()()()),e&2&&(s(5),m("ngIf",r.bookName),s(),m("ngIf",!r.showDatasetSelector),s(),m("ngIf",r.showDatasetSelector),s(56),m("disabled",r.isBulkImporting),s(),I(" ",r.isBulkImporting?"Importing...":"Import All Datasets"," "),s(),m("ngIf",r.isBulkImporting))},dependencies:[E,O,D,A,N,L,V,z,B,F],styles:['.main-menu-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#1e40af,#3b82f6,#1e40af);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);position:relative;overflow:hidden}.main-menu-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 50%,rgba(251,191,36,.1) 0%,transparent 50%),radial-gradient(circle at 80% 80%,rgba(251,191,36,.1) 0%,transparent 50%);pointer-events:none}.main-menu-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-2xl);position:relative;z-index:1}.main-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:clamp(2.5rem,5vw,4.5rem);font-weight:700;color:var(--xl-white);text-shadow:3px 3px 6px rgba(0,0,0,.3);margin-bottom:var(--spacing-md);letter-spacing:-.02em}.book-selector-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-md)}.book-name[_ngcontent-%COMP%]{font-size:clamp(1.25rem,2.5vw,1.75rem);color:var(--xl-gold-light);font-weight:600;text-shadow:2px 2px 4px rgba(0,0,0,.2)}.btn-change-book[_ngcontent-%COMP%]{padding:.625rem 1.25rem;font-size:.9375rem;font-weight:600;background:#fff3;color:var(--xl-white);border:2px solid rgba(255,255,255,.4);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-base);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.btn-change-book[_ngcontent-%COMP%]:hover{background:#ffffff4d;border-color:#fff9;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.dataset-selector[_ngcontent-%COMP%]{margin-top:var(--spacing-lg);background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:var(--radius-lg);padding:var(--spacing-xl);box-shadow:var(--shadow-xl);border:2px solid rgba(255,255,255,.5);min-width:400px}.dataset-selector[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.25rem;color:var(--xl-blue-dark);margin-bottom:var(--spacing-lg);text-align:center;font-weight:700}.selector-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-lg)}.dataset-dropdown[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:1rem;font-family:var(--font-primary);border:2px solid var(--xl-gray-light);border-radius:var(--radius-md);background:var(--xl-white);color:var(--xl-black);cursor:pointer;transition:all var(--transition-base)}.dataset-dropdown[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--xl-blue);box-shadow:0 0 0 3px #1e40af1a}.selector-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);justify-content:center}.selector-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:1rem;font-weight:600;border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-base);border:none;font-family:var(--font-primary)}.selector-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--xl-blue) 0%,var(--xl-blue-dark) 100%);color:var(--xl-white);box-shadow:var(--shadow-md)}.selector-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-lg)}.selector-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{background:var(--xl-gray-light);cursor:not-allowed;opacity:.6}.selector-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:var(--xl-gray-light);color:var(--xl-black)}.selector-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:var(--xl-gray);transform:translateY(-2px)}.selector-mode-tabs[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);margin-bottom:var(--spacing-lg);border-bottom:2px solid var(--xl-gray-light)}.mode-tab[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:1rem;font-weight:600;background:transparent;color:var(--xl-gray);border:none;border-bottom:3px solid transparent;cursor:pointer;transition:all var(--transition-base);font-family:var(--font-primary)}.mode-tab[_ngcontent-%COMP%]:hover{color:var(--xl-blue)}.mode-tab.active[_ngcontent-%COMP%]{color:var(--xl-blue);border-bottom-color:var(--xl-blue)}.create-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--xl-blue-dark);font-size:.9375rem}.form-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:1rem;font-family:var(--font-primary);border:2px solid var(--xl-gray-light);border-radius:var(--radius-md);background:var(--xl-white);color:var(--xl-black);transition:all var(--transition-base)}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--xl-blue);box-shadow:0 0 0 3px #1e40af1a}.form-input[_ngcontent-%COMP%]::placeholder{color:var(--xl-gray);opacity:.7}.main-menu-content[_ngcontent-%COMP%]{width:100%;max-width:1400px;position:relative;z-index:1}.menu-nav[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--spacing-xl)}.menu-section[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:var(--radius-xl);padding:var(--spacing-xl);box-shadow:var(--shadow-xl);border:1px solid rgba(255,255,255,.3);transition:all var(--transition-slow)}.menu-section[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 25px 50px -12px #00000040;background:var(--xl-white)}.menu-section-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.5rem;color:var(--xl-blue-dark);margin-bottom:var(--spacing-lg);padding-bottom:var(--spacing-md);border-bottom:3px solid var(--xl-gold);font-weight:700;display:flex;align-items:center;gap:var(--spacing-sm)}.menu-section-title[_ngcontent-%COMP%]:before{content:"";width:4px;height:1.5rem;background:linear-gradient(135deg,var(--xl-gold) 0%,var(--xl-gold-dark) 100%);border-radius:2px}.menu-list[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:column;gap:var(--spacing-md)}.menu-item[_ngcontent-%COMP%]{width:100%;padding:1rem 1.25rem;font-size:1rem;font-weight:600;font-family:var(--font-primary);background:linear-gradient(135deg,var(--xl-blue) 0%,var(--xl-blue-dark) 100%);color:var(--xl-white);border:none;border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-base);text-align:left;box-shadow:var(--shadow-md);position:relative;overflow:hidden}.menu-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left var(--transition-slow)}.menu-item[_ngcontent-%COMP%]:hover:before{left:100%}.menu-item[_ngcontent-%COMP%]:hover{transform:translate(8px) translateY(-2px);box-shadow:var(--shadow-lg)}.menu-item[_ngcontent-%COMP%]:active{transform:translate(4px) translateY(0)}.menu-item.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--xl-gold) 0%,var(--xl-gold-dark) 100%);color:var(--xl-black);font-weight:700;font-size:1.125rem;padding:1.25rem 1.5rem}.menu-item.primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--xl-gold-dark) 0%,var(--xl-gold) 100%);color:var(--xl-white)}.menu-item.primary[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,transparent,rgba(0,0,0,.1),transparent)}@media (max-width: 768px){.main-menu-container[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.main-title[_ngcontent-%COMP%]{font-size:2.5rem}.menu-nav[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-lg)}.menu-section[_ngcontent-%COMP%]{padding:var(--spacing-lg)}}@media (max-width: 480px){.main-title[_ngcontent-%COMP%]{font-size:2rem}.menu-item[_ngcontent-%COMP%]{padding:.875rem 1rem;font-size:.9375rem}}.bulk-import-progress[_ngcontent-%COMP%]{margin-top:var(--spacing-2xl);padding:var(--spacing-xl);background:#fffffff2;border-radius:var(--radius-lg);box-shadow:var(--shadow-xl);max-width:500px;width:100%;position:relative;z-index:2}.bulk-import-progress[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--xl-blue-dark);margin:0 0 var(--spacing-md) 0;font-size:1.5rem;text-align:center}.bulk-import-progress[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--xl-black);margin:var(--spacing-sm) 0;text-align:center;font-weight:500}.progress-bar[_ngcontent-%COMP%]{width:100%;height:30px;background:var(--xl-gray-light);border-radius:var(--radius-md);overflow:hidden;margin:var(--spacing-md) 0;box-shadow:inset 0 2px 4px #0000001a}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--xl-blue) 0%,var(--xl-blue-dark) 100%);transition:width .3s ease;box-shadow:0 0 10px #3b82f680}']})};export{W as MainMenuComponent};
